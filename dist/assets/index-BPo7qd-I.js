const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Main-dHat6CjN.js","assets/@vue-CisjAB5t.js","assets/vue-router-Cy3-6-Xz.js","assets/element-plus-CDN9BKpg.js","assets/@vueuse-Cg8ssQxY.js","assets/@unhead-kqohiLkD.js","assets/unhead-C_h-0uJb.js","assets/hookable-B8xFkYCm.js","assets/@element-plus-Bc65TjFU.js","assets/lodash-es-DCo95CJQ.js","assets/@ctrl-r5W6hzzQ.js","assets/async-validator-CRx4dHSJ.js","assets/@popperjs-DB1lLFnh.js","assets/element-plus-C9s1cBjh.css","assets/editService-BWOmej4D.js","assets/axios-NIGUFBhG.js","assets/pinia-BRCzBT2l.js","assets/Main-Dw-wyPK8.css","assets/Home-mTMtUvq7.js","assets/Home-Cms3V_9p.css","assets/Page2-BFfcZjkL.js","assets/Page2-i8kdTGex.css","assets/Login-WxLgXoEi.js","assets/authService-CL4i09KF.js","assets/Login-D6hxqEQW.css","assets/Register-D6APa3b5.js","assets/Register-CW5Gz3FD.css","assets/404-DcKUt0Fs.js","assets/404-1WfWS5ZM.css"])))=>i.map(i=>d[i]);
import{c as P,Q as O,a6 as A,o as R,r as y,ak as I}from"./@vue-CisjAB5t.js";import{c as w,a as S}from"./vue-router-Cy3-6-Xz.js";import"./element-plus-CDN9BKpg.js";import{d as D,c as T}from"./pinia-BRCzBT2l.js";import{h as V}from"./@vueuse-Cg8ssQxY.js";import"./@element-plus-Bc65TjFU.js";import"./lodash-es-DCo95CJQ.js";import"./@ctrl-r5W6hzzQ.js";import"./async-validator-CRx4dHSJ.js";import"./@popperjs-DB1lLFnh.js";import"./@unhead-kqohiLkD.js";import"./unhead-C_h-0uJb.js";import"./hookable-B8xFkYCm.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))u(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&u(o)}).observe(document,{childList:!0,subtree:!0});function a(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerPolicy&&(n.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?n.credentials="include":t.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function u(t){if(t.ep)return;t.ep=!0;const n=a(t);fetch(t.href,n)}})();const b=(e,i)=>{const a=e.__vccOpts||e;for(const[u,t]of i)a[u]=t;return a},k={};function N(e,i){const a=A("router-view");return R(),P("div",null,[O(a)])}const M=b(k,[["render",N]]),C="modulepreload",$=function(e){return"/"+e},v={},l=function(i,a,u){let t=Promise.resolve();if(a&&a.length>0){let h=function(s){return Promise.all(s.map(m=>Promise.resolve(m).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=o?.nonce||o?.getAttribute("nonce");t=h(a.map(s=>{if(s=$(s),s in v)return;v[s]=!0;const m=s.endsWith(".css"),p=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${s}"]${p}`))return;const r=document.createElement("link");if(r.rel=m?"stylesheet":C,m||(r.as="script"),r.crossOrigin="",r.href=s,c&&r.setAttribute("nonce",c),document.head.appendChild(r),m)return new Promise((f,L)=>{r.addEventListener("load",f),r.addEventListener("error",()=>L(new Error(`Unable to preload CSS for ${s}`)))})}))}function n(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return t.then(o=>{for(const c of o||[])c.status==="rejected"&&n(c.reason);return i().catch(n)})},H=[{path:"/",name:"main",component:()=>l(()=>import("./Main-dHat6CjN.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17])),redirect:"/login",children:[{path:"/home",name:"home",component:()=>l(()=>import("./Home-mTMtUvq7.js"),__vite__mapDeps([18,15,3,1,4,5,6,7,8,9,10,11,12,13,14,2,16,19]))},{path:"/page2",name:"page2",component:()=>l(()=>import("./Page2-BFfcZjkL.js"),__vite__mapDeps([20,1,3,4,5,6,7,8,9,10,11,12,13,14,15,2,16,21]))}]},{path:"/login",name:"login",component:()=>l(()=>import("./Login-WxLgXoEi.js"),__vite__mapDeps([22,2,1,23,15,3,4,5,6,7,8,9,10,11,12,13,16,24]))},{path:"/register",name:"Register",component:()=>l(()=>import("./Register-D6APa3b5.js"),__vite__mapDeps([25,1,23,15,2,3,4,5,6,7,8,9,10,11,12,13,16,26]))},{path:"/404",name:"404",component:()=>l(()=>import("./404-DcKUt0Fs.js"),__vite__mapDeps([27,2,1,3,4,5,6,7,8,9,10,11,12,13,28]))}],_=w({history:S(),routes:H});function g(){return{isCollapse:!1,menuList:[{path:"/home",name:"home",label:"首页",icon:"house",url:"Home"},{path:"/page2",name:"page2",label:"个人信息编辑",icon:"setting",url:"Page2"}],routerList:[],token:"",theme:"light",avatar:""}}const j=D("allData",()=>{const e=y(g());e.value.token=localStorage.getItem("token")||"";function i(o){e.value.avatar=o}function a(o){e.value.menuList=o}function u(o,c){const h=Object.assign({"../views/404.vue":()=>l(()=>import("./404-DcKUt0Fs.js"),__vite__mapDeps([27,2,1,3,4,5,6,7,8,9,10,11,12,13,28])),"../views/Home.vue":()=>l(()=>import("./Home-mTMtUvq7.js"),__vite__mapDeps([18,15,3,1,4,5,6,7,8,9,10,11,12,13,14,2,16,19])),"../views/Login.vue":()=>l(()=>import("./Login-WxLgXoEi.js"),__vite__mapDeps([22,2,1,23,15,3,4,5,6,7,8,9,10,11,12,13,16,24])),"../views/Main.vue":()=>l(()=>import("./Main-dHat6CjN.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17])),"../views/Page2.vue":()=>l(()=>import("./Page2-BFfcZjkL.js"),__vite__mapDeps([20,1,3,4,5,6,7,8,9,10,11,12,13,14,15,2,16,21])),"../views/Register.vue":()=>l(()=>import("./Register-D6APa3b5.js"),__vite__mapDeps([25,1,23,15,2,3,4,5,6,7,8,9,10,11,12,13,16,26]))});let s=[];c!=="refresh"&&(e.value.menuList.forEach(r=>{const f=`../views/${r.url}.vue`;r.componentPath=f,s.push(r)}),localStorage.setItem("routeArr",JSON.stringify(s)));const m=o.getRoutes();console.log("清理旧路由之前：",m),console.log("清理旧路由之后：",m),console.log("routeArr",s),s.forEach(r=>{const f=h[r.componentPath];f?(r.component=f,e.value.routerList.push(o.addRoute("main",r))):console.error(`组件不存在: ${r.componentPath}`)}),!localStorage.getItem("token")&&c==="refresh"&&o.push("/login"),console.log("menulist",e.value.menuList)}function t(){e.value.routerList.forEach(o=>{o&&o()}),e.value=g(),localStorage.removeItem("store")}function n(){e.value.theme=e.value.theme==="light"?"dark":"light"}return{state:e,updateImg:i,updateMenuList:a,addMenu:u,clean:t,toggleTheme:n}});function q(e){let i=_.getRoutes();return console.log(i),i.filter(u=>u.path===e.path).length>0}_.beforeEach((e,i)=>{if(!q(e))return{name:"404"};if(e.path!=="/login"&&!E.state.token)return{name:"login"}});const x=T(),d=I(M);d.use(x);const E=j();E.addMenu(_,"refresh");d.use(_);d.use(V());d.mount("#app");export{b as _,j as u};
