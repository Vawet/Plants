import{X as N,r as o,c as V,Q as r,O as u,R,o as k,a as s,J as B,L as n,S as I,T as q,a3 as z}from"./@vue-CisjAB5t.js";import{r as F}from"./authService-CL4i09KF.js";import{_ as L,u as M}from"./index-BPo7qd-I.js";import{u as A}from"./vue-router-Cy3-6-Xz.js";import{o as D,q as P,t as U,u as $,k as h}from"./element-plus-CDN9BKpg.js";import"./axios-NIGUFBhG.js";import"./pinia-BRCzBT2l.js";import"./@vueuse-Cg8ssQxY.js";import"./@unhead-kqohiLkD.js";import"./unhead-C_h-0uJb.js";import"./hookable-B8xFkYCm.js";import"./@element-plus-Bc65TjFU.js";import"./lodash-es-DCo95CJQ.js";import"./@ctrl-r5W6hzzQ.js";import"./async-validator-CRx4dHSJ.js";import"./@popperjs-DB1lLFnh.js";const J={class:"body-register"},O={key:0,class:"password-strength"},Q={class:"strength-progress"},X={class:"password-tips"},Z={__name:"Register",setup(j){const w=A(),S=M(),t=N({username:"",password:""}),m=o(0),i=o(""),l=o(""),d=o(!1),c=o(!1),v=o(!1),f=o(!1);let _=null;const x=()=>{_&&clearTimeout(_),_=setTimeout(()=>{E()},300)};function E(){const a=t.password;d.value=a.length>=8&&a.length<=25,c.value=/\d/.test(a),v.value=/[A-Za-z]/.test(a),f.value=/[@$!%*?&.]/.test(a);let e=0;d.value&&(e+=25),c.value&&(e+=25),v.value&&(e+=25),f.value&&(e+=25),m.value=e,e>=75?(i.value="强",l.value="strong"):e>=50?(i.value="中",l.value="medium"):e>=25?(i.value="弱",l.value="weak"):(i.value="极弱",l.value="very-weak")}const b=async a=>{if(m.value<50){h.error("密码强度太弱，请使用更强的密码");return}try{await F({username:t.username,password:t.password,role:a}),h.success("注册成功！"),S.addMenu(w),w.push("/home")}catch(e){console.log(e),h.error("注册失败！")}};return(a,e)=>{const y=U,g=P,T=$,C=D;return k(),V("div",J,[r(C,{class:"register-container",onSubmit:R(b,["prevent"])},{default:u(()=>[e[5]||(e[5]=s("h1",null,"用户注册",-1)),r(g,null,{default:u(()=>[r(y,{type:"input",placeholder:"请输入账号",modelValue:t.username,"onUpdate:modelValue":e[0]||(e[0]=p=>t.username=p),required:""},null,8,["modelValue"])]),_:1}),r(g,null,{default:u(()=>[r(y,{type:"password",placeholder:"请输入密码",modelValue:t.password,"onUpdate:modelValue":e[1]||(e[1]=p=>t.password=p),onInput:x,required:""},null,8,["modelValue"]),t.password?(k(),V("div",O,[e[3]||(e[3]=s("span",{class:"strength-label"},"密码强度：",-1)),s("span",{class:n(["strength-level",l.value])},I(i.value),3),s("div",Q,[s("div",{class:n(["strength-bar",l.value]),style:q({width:m.value+"%"})},null,6)])])):B("",!0),s("div",X,[s("span",{class:n(["tip-item",{valid:d.value}])}," ✓ 长度8-25位 ",2),s("span",{class:n(["tip-item",{valid:c.value}])}," ✓ 包含数字 ",2),s("span",{class:n(["tip-item",{valid:v.value}])}," ✓ 包含字母 ",2),s("span",{class:n(["tip-item",{valid:f.value}])}," ✓ 包含特殊字符 ",2)])]),_:1}),r(g,{class:"button"},{default:u(()=>[r(T,{class:"gradient-btn register-btn",onClick:e[2]||(e[2]=p=>b(0))},{default:u(()=>e[4]||(e[4]=[z("注册")])),_:1,__:[4]})]),_:1})]),_:1,__:[5]})])}}},me=L(Z,[["__scopeId","data-v-23c1301d"]]);export{me as default};
