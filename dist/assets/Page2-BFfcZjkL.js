import{r as p,p as B,c as w,a as o,Q as a,O as l,o as f,a3 as _,u as n,M as I,R as L,L as E,S as y}from"./@vue-CisjAB5t.js";import{o as M,p as N,q as R,j as z,t as F,u as j,k as h,v as q}from"./element-plus-CDN9BKpg.js";import{h as G,a as O}from"./editService-BWOmej4D.js";import{p as S,k as A,n as D,t as J,r as Q,u as T}from"./@element-plus-Bc65TjFU.js";import{_ as H}from"./index-BPo7qd-I.js";import"./@vueuse-Cg8ssQxY.js";import"./@unhead-kqohiLkD.js";import"./unhead-C_h-0uJb.js";import"./hookable-B8xFkYCm.js";import"./lodash-es-DCo95CJQ.js";import"./@ctrl-r5W6hzzQ.js";import"./async-validator-CRx4dHSJ.js";import"./@popperjs-DB1lLFnh.js";import"./axios-NIGUFBhG.js";import"./vue-router-Cy3-6-Xz.js";import"./pinia-BRCzBT2l.js";const K={class:"admin-container"},W={class:"admin-main"},X={class:"form-container"},Y={class:"form-grid"},Z={class:"form-section"},$={class:"form-section-title"},aa={key:0,class:"image-container"},ea=["src"],oa={class:"image-overlay"},la={class:"form-section"},ta={class:"form-section-title",style:{"margin-top":"30px"}},sa={class:"form-actions"},ra={__name:"Page2",setup(na){const t=p({author:"",authorBio:"",authorBioEn:""}),u=p(""),k=p({author:[{required:!0,message:"请输入您的姓名",trigger:"blur"}]});p([{value:"1",label:"1: 草本植物"},{value:"2",label:"2: 木本植物"},{value:"3",label:"3: 多肉植物"},{value:"4",label:"4: 水生植物"},{value:"5",label:"5: 藤本植物"},{value:"6",label:"6: 食虫植物"},{value:"7",label:"7: 蕨类植物"},{value:"8",label:"8: 兰科植物"},{value:"9",label:"9: 苔藓植物"},{value:"10",label:"10: 珍稀植物"}]);const d=B(()=>t.value.authorBio.length),m=B(()=>t.value.authorBioEn.length),V=s=>{s&&s.stopPropagation(),u.value=""},g=()=>{t.value={avatar:"",author:"",authorBio:"",authorBioEn:""},h.success("表单已重置")},x=async()=>{if(!t.value.author){h.warning("请填写您的姓名");return}const s=q.service({lock:!0,text:"正在提交数据...",background:"rgba(0, 0, 0, 0.7)"});try{await O(t.value)}catch(e){h.error("提交数据时出错，请稍后再试"),console.error(e)}finally{s.close(),g()}},C=async s=>{s.raw&&(u.value=URL.createObjectURL(s.raw)),await G(s),u.value=store.state.avatar};return(s,e)=>{const r=N,U=z,c=R,v=F,b=j,P=M;return f(),w("div",K,[e[8]||(e[8]=o("div",{class:"admin-header"},[o("div",null,[o("h1",{class:"admin-title"},"前台主页编辑"),o("div",{class:"admin-subtitle"})])],-1)),o("div",W,[o("div",X,[a(P,{ref:"plantForm",model:t.value,rules:k.value,"label-position":"top"},{default:l(()=>[o("div",Y,[o("div",Z,[o("h3",$,[a(r,null,{default:l(()=>[a(n(S))]),_:1}),e[3]||(e[3]=_(" 头像图片修改 "))]),a(c,{prop:"images"},{default:l(()=>[a(U,{class:"avatar-uploader",action:"#","show-file-list":!1,"on-change":C},{default:l(()=>[u.value?(f(),w("div",aa,[o("img",{src:u.value,class:"avatar"},null,8,ea),o("div",oa,[a(r,{class:"delete-icon",onClick:L(V,["stop"])},{default:l(()=>[a(n(A))]),_:1})])])):(f(),I(r,{key:1,class:"avatar-uploader-icon"},{default:l(()=>[a(n(D))]),_:1}))]),_:1}),e[4]||(e[4]=o("div",{class:"el-upload__tip"}," 请选择一张头像上传，支持 JPG/PNG 格式，每张图片不超过 5MB ",-1))]),_:1,__:[4]})]),o("div",la,[o("h3",ta,[a(r,null,{default:l(()=>[a(n(J))]),_:1}),e[5]||(e[5]=_(" 添加者信息 "))]),a(c,{prop:"author",label:"您的姓名"},{default:l(()=>[a(v,{modelValue:t.value.author,"onUpdate:modelValue":e[0]||(e[0]=i=>t.value.author=i),placeholder:"请输入您的姓名"},null,8,["modelValue"])]),_:1}),a(c,{prop:"authorBio",label:"个人简介"},{default:l(()=>[a(v,{modelValue:t.value.authorBio,"onUpdate:modelValue":e[1]||(e[1]=i=>t.value.authorBio=i),type:"textarea",rows:4,placeholder:"请输入个人简介（不超过150字）","show-word-limit":"",maxlength:"150"},null,8,["modelValue"]),o("div",{class:E(["character-count",{warning:d.value>=130&&d.value<145,error:d.value>=145}])},y(d.value)+"/150 ",3)]),_:1}),a(c,{prop:"authorBioEn",label:"英文介绍"},{default:l(()=>[a(v,{modelValue:t.value.authorBioEn,"onUpdate:modelValue":e[2]||(e[2]=i=>t.value.authorBioEn=i),type:"textarea",rows:4,placeholder:"请输入个人简介（不超过150字）","show-word-limit":"",maxlength:"150"},null,8,["modelValue"]),o("div",{class:E(["character-count",{warning:m.value>=130&&m.value<145,error:m.value>=145}])},y(m.value)+"/150 ",3)]),_:1})])]),o("div",sa,[a(b,{type:"info",onClick:g,size:"large"},{default:l(()=>[a(r,null,{default:l(()=>[a(n(Q))]),_:1}),e[6]||(e[6]=_(" 重置表单 "))]),_:1,__:[6]}),a(b,{type:"primary",onClick:x,size:"large"},{default:l(()=>[a(r,null,{default:l(()=>[a(n(T))]),_:1}),e[7]||(e[7]=_(" 提交信息 "))]),_:1,__:[7]})])]),_:1},8,["model","rules"])])])])}}},ka=H(ra,[["__scopeId","data-v-66932244"]]);export{ka as default};
